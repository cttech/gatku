!function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var BlurbSlider={init:function(){$(".slideshow").skippr({navType:"bubble"})}},Mast={init:function(){requestAnimationFrame(Mast.track)},element:$(".mast"),track:function(){var a=$(document).scrollTop(),b=Mast.element.height(),c=$(window).height();a>c-b?Mast.element.addClass("below-fold"):Mast.element.removeClass("below-fold"),requestAnimationFrame(Mast.track)}},Squares={init:function(){Squares.squarify(),setTimeout(function(){Squares.init()},100)},squarify:function(){var a=$(".square");a.each(function(){var a=$(this).width();$(this).height(a)}),a=null}},PurchaseColumn={init:function(){$(window).width()>1300&&(this.parent=this.element.parent(),this.parentHeight=this.parent.height(),this.initialOffsetTop=this.element.offset().top,this.elementHeight=this.element.height(),requestAnimationFrame(PurchaseColumn.stick))},element:$(".product-column-right"),parent:null,parentHeight:null,initialOffsetTop:0,elementHeight:null,stick:function(){var a=$(document).scrollTop(),b=PurchaseColumn.initialOffsetTop,c=PurchaseColumn.elementHeight,d=PurchaseColumn.parentHeight,e=a-b+70;a>b-70&&b-70+(d-c)>a?PurchaseColumn.element.css("top",e+"px"):a>=b-70+(d-c)?PurchaseColumn.element.css("top",d-c+"px"):PurchaseColumn.element.css("top","0px"),requestAnimationFrame(PurchaseColumn.stick)}},PoleScroll={init:function(){this.scrollPosition()},element:$(".scroller"),scrollPosition:function(){var a=$(".scroller");"head"===layoutType||"bands"===slug?a.scrollLeft($(window).width()<1e3?$(".scroller-image.visible").width()-600:$(".scroller-image.visible").width()):"shrinker"===layoutType&&a.scrollLeft($(".scroller-image").width()-3100),a=null}},ApparelRotator={init:function(a){var b;"niner-tshirt"===a?b=this.photos.niner:"superhero-tshirt"===a?b=this.photos.superhero:"comfort-hoodie"===a&&(b=this.photos.comfort),$(".apparel-container").rollerblade({imageArray:b})},photos:{niner:[CONFIG.base+"/img/apparel/niner/niner-1.jpg",CONFIG.base+"/img/apparel/niner/niner-2.jpg",CONFIG.base+"/img/apparel/niner/niner-3.jpg",CONFIG.base+"/img/apparel/niner/niner-4.jpg",CONFIG.base+"/img/apparel/niner/niner-5.jpg",CONFIG.base+"/img/apparel/niner/niner-6.jpg",CONFIG.base+"/img/apparel/niner/niner-7.jpg",CONFIG.base+"/img/apparel/niner/niner-8.jpg"],superhero:[CONFIG.base+"/img/apparel/superhero/superhero-1.jpg",CONFIG.base+"/img/apparel/superhero/superhero-2.jpg",CONFIG.base+"/img/apparel/superhero/superhero-3.jpg",CONFIG.base+"/img/apparel/superhero/superhero-4.jpg",CONFIG.base+"/img/apparel/superhero/superhero-5.jpg",CONFIG.base+"/img/apparel/superhero/superhero-6.jpg",CONFIG.base+"/img/apparel/superhero/superhero-7.jpg",CONFIG.base+"/img/apparel/superhero/superhero-8.jpg"],comfort:[CONFIG.base+"/img/apparel/comfort/comfort-1.jpg",CONFIG.base+"/img/apparel/comfort/comfort-2.jpg",CONFIG.base+"/img/apparel/comfort/comfort-3.jpg",CONFIG.base+"/img/apparel/comfort/comfort-4.jpg",CONFIG.base+"/img/apparel/comfort/comfort-5.jpg",CONFIG.base+"/img/apparel/comfort/comfort-6.jpg",CONFIG.base+"/img/apparel/comfort/comfort-7.jpg",CONFIG.base+"/img/apparel/comfort/comfort-8.jpg"]}},Grid={init:function(){this.squarify(),this.rectanglify()},squarify:function(){$(".media-square").each(function(){var a=$(this).width();$(this).height(a)})},rectanglify:function(){$(".media-rectangle").each(function(){var a=$(this).width();$(this).height(1.5*a)})}};$(document).ready(function(){Squares.init(),"media"===currentRoute&&Grid.init(),"home"===currentRoute&&(Mast.init(),BlurbSlider.init()),"product.show"===currentRoute&&PurchaseColumn.init(),"apparel"===layoutType&&null!==slug&&ApparelRotator.init(slug),$("a[href*=#]:not([href=#])").on("click",function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=$(this.hash);if(a=a.length?a:$("[name="+this.hash.slice(1)+"]"),a.length)return $("html,body").animate({scrollTop:a.offset().top},400),!1}})}),$(window).resize(function(){Squares.init(),"media"===currentRoute&&Grid.init()}),function(a,b,c){"use strict";b.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(a,d){function e(){var a,e,f,i;for(a in h)k(g[a])&&d.cookies(a,c);for(a in g)e=g[a],b.isString(e)||(e=""+e,g[a]=e),e!==h[a]&&(d.cookies(a,e),i=!0);if(i){i=!1,f=d.cookies();for(a in g)g[a]!==f[a]&&(k(f[a])?delete g[a]:g[a]=f[a],i=!0)}}var f,g={},h={},i=!1,j=b.copy,k=b.isUndefined;return d.addPollFn(function(){var b=d.cookies();f!=b&&(f=b,j(b,h),j(b,g),i&&a.$apply())})(),i=!0,a.$watch(e),g}]).factory("$cookieStore",["$cookies",function(a){return{get:function(c){var d=a[c];return d?b.fromJson(d):d},put:function(c,d){a[c]=b.toJson(d)},remove:function(b){delete a[b]}}}])}(window,window.angular),angular.module("ivpusic.cookie",["ipCookie"]),angular.module("ipCookie",["ng"]).factory("ipCookie",["$document",function(a){"use strict";function b(a){try{return decodeURIComponent(a)}catch(b){}}return function(){function c(c,d,e){var f,g,h,i,j,k,l,m,n;if(e=e||{},void 0!==d)return d="object"==typeof d?JSON.stringify(d):String(d),"number"==typeof e.expires&&(n=e.expires,e.expires=new Date,-1===n?e.expires=new Date("Thu, 01 Jan 1970 00:00:00 GMT"):void 0!==e.expirationUnit?"hours"===e.expirationUnit?e.expires.setHours(e.expires.getHours()+n):"minutes"===e.expirationUnit?e.expires.setMinutes(e.expires.getMinutes()+n):"seconds"===e.expirationUnit?e.expires.setSeconds(e.expires.getSeconds()+n):e.expires.setDate(e.expires.getDate()+n):e.expires.setDate(e.expires.getDate()+n)),a[0].cookie=[encodeURIComponent(c),"=",encodeURIComponent(d),e.expires?"; expires="+e.expires.toUTCString():"",e.path?"; path="+e.path:"",e.domain?"; domain="+e.domain:"",e.secure?"; secure":""].join("");for(g=[],m=a[0].cookie,m&&(g=m.split("; ")),f={},l=!1,h=0;h<g.length;++h)if(g[h]){if(i=g[h],j=i.indexOf("="),k=i.substring(0,j),d=b(i.substring(j+1)),angular.isUndefined(d))continue;if(void 0===c||c===k){try{f[k]=JSON.parse(d)}catch(o){f[k]=d}if(c===k)return f[k];l=!0}}return l&&void 0===c?f:void 0}return c.remove=function(a,b){var d=void 0!==c(a);return d&&(b||(b={}),b.expires=-1,c(a,"",b)),d},c}()}]),function(a,b,c){"use strict";b.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var a="$$ngAnimateChildren";return function(c,d,e){var f=e.ngAnimateChildren;b.isString(f)&&0===f.length?d.data(a,!0):c.$watch(f,function(b){d.data(a,!!b)})}}).factory("$$animateReflow",["$$rAF","$document",function(a,b){var c=b[0].body;return function(b){return a(function(){c.offsetWidth+1;b()})}}]).config(["$provide","$animateProvider",function(d,e){function f(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType==q)return c}}function g(a){return a&&b.element(a)}function h(a){return b.element(f(a))}function i(a,b){return f(a)==f(b)}var j,k=b.noop,l=b.forEach,m=e.$$selectors,n=b.isArray,o=b.isString,p=b.isObject,q=1,r="$$ngAnimateState",s="$$ngAnimateChildren",t="ng-animate",u={running:!0};d.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(a,c,d,q,v,w,x,y,z,A){function B(a,b){var c=a.data(r)||{};return b&&(c.running=!0,c.structural=!0,a.data(r,c)),c.disabled||c.running&&c.structural}function C(a){var b,d=c.defer();return d.promise.$$cancelFn=function(){b&&b()},x.$$postDigest(function(){b=a(function(){d.resolve()})}),d.promise}function D(a){return p(a)?(a.tempClasses&&o(a.tempClasses)&&(a.tempClasses=a.tempClasses.split(/\s+/)),a):void 0}function E(a,b,c){c=c||{};var d={};l(c,function(a,b){l(b.split(" "),function(b){d[b]=a})});var e=Object.create(null);l((a.attr("class")||"").split(/\s+/),function(a){e[a]=!0});var f=[],g=[];return l(b&&b.classes||[],function(a,b){var c=e[b],h=d[b]||{};a===!1?(c||"addClass"==h.event)&&g.push(b):a===!0&&(c&&"removeClass"!=h.event||f.push(b))}),f.length+g.length>0&&[f.join(" "),g.join(" ")]}function F(a){if(a){var b=[],c={},e=a.substr(1).split(".");(q.transitions||q.animations)&&b.push(d.get(m[""]));for(var f=0;f<e.length;f++){var g=e[f],h=m[g];h&&!c[g]&&(b.push(d.get(h)),c[g]=!0)}return b}}function G(a,c,d,e){function f(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];return c||d?("leave"==b&&(d=c,c=null),w.push({event:b,fn:c}),t.push({event:b,fn:d}),!0):void 0}function g(b,c,f){function g(a){if(c){if((c[a]||k)(),++m<h.length)return;c=null}f()}var h=[];l(b,function(a){a.fn&&h.push(a)});var m=0;l(h,function(b,f){var h=function(){g(f)};switch(b.event){case"setClass":c.push(b.fn(a,i,j,h,e));break;case"animate":c.push(b.fn(a,d,e.from,e.to,h));break;case"addClass":c.push(b.fn(a,i||d,h,e));break;case"removeClass":c.push(b.fn(a,j||d,h,e));break;default:c.push(b.fn(a,h,e))}}),c&&0===c.length&&f()}var h=a[0];if(h){e&&(e.to=e.to||{},e.from=e.from||{});var i,j;n(d)&&(i=d[0],j=d[1],i?j?d=i+" "+j:(d=i,c="addClass"):(d=j,c="removeClass"));var m="setClass"==c,o=m||"addClass"==c||"removeClass"==c||"animate"==c,p=a.attr("class"),q=p+" "+d;if(O(q)){var r=k,s=[],t=[],u=k,v=[],w=[],x=(" "+q).replace(/\s+/g,".");return l(F(x),function(a){var b=f(a,c);!b&&m&&(f(a,"addClass"),f(a,"removeClass"))}),{node:h,event:c,className:d,isClassBased:o,isSetClassOperation:m,applyStyles:function(){e&&a.css(b.extend(e.from||{},e.to||{}))},before:function(a){r=a,g(t,s,function(){r=k,a()})},after:function(a){u=a,g(w,v,function(){u=k,a()})},cancel:function(){s&&(l(s,function(a){(a||k)(!0)}),r(!0)),v&&(l(v,function(a){(a||k)(!0)}),u(!0))}}}}}function H(a,c,d,e,f,g,h,i){function m(b){var e="$animate:"+b;x&&x[e]&&x[e].length>0&&w(function(){d.triggerHandler(e,{event:a,className:c})})}function n(){m("before")}function o(){m("after")}function p(){m("close"),i()}function q(){q.hasBeenRun||(q.hasBeenRun=!0,g())}function s(){if(!s.hasBeenRun){v&&v.applyStyles(),s.hasBeenRun=!0,h&&h.tempClasses&&l(h.tempClasses,function(a){j.removeClass(d,a)});var b=d.data(r);b&&(v&&v.isClassBased?J(d,c):(w(function(){var b=d.data(r)||{};H==b.index&&J(d,c,a)}),d.data(r,b))),p()}}var u=k,v=G(d,a,c,h);if(!v)return q(),n(),o(),s(),u;a=v.event,c=v.className;var x=b.element._data(v.node);if(x=x&&x.events,e||(e=f?f.parent():d.parent()),K(d,e))return q(),n(),o(),s(),u;var y=d.data(r)||{},z=y.active||{},A=y.totalActive||0,B=y.last,C=!1;if(A>0){var D=[];if(v.isClassBased){if("setClass"==B.event)D.push(B),J(d,c);else if(z[c]){var E=z[c];E.event==a?C=!0:(D.push(E),J(d,c))}}else if("leave"==a&&z["ng-leave"])C=!0;else{for(var F in z)D.push(z[F]);y={},J(d,!0)}D.length>0&&l(D,function(a){a.cancel()})}if(!v.isClassBased||v.isSetClassOperation||"animate"==a||C||(C="addClass"==a==d.hasClass(c)),C)return q(),n(),o(),p(),u;z=y.active||{},A=y.totalActive||0,"leave"==a&&d.one("$destroy",function(){var a=b.element(this),c=a.data(r);if(c){var d=c.active["ng-leave"];d&&(d.cancel(),J(a,"ng-leave"))}}),j.addClass(d,t),h&&h.tempClasses&&l(h.tempClasses,function(a){j.addClass(d,a)});var H=M++;return A++,z[c]=v,d.data(r,{last:v,active:z,index:H,totalActive:A}),n(),v.before(function(b){var e=d.data(r);b=b||!e||!e.active[c]||v.isClassBased&&e.active[c].event!=a,q(),b===!0?s():(o(),v.after(s))}),v.cancel}function I(a){var c=f(a);if(c){var d=b.isFunction(c.getElementsByClassName)?c.getElementsByClassName(t):c.querySelectorAll("."+t);l(d,function(a){a=b.element(a);var c=a.data(r);c&&c.active&&l(c.active,function(a){a.cancel()})})}}function J(a,b){if(i(a,v))u.disabled||(u.running=!1,u.structural=!1);else if(b){var c=a.data(r)||{},d=b===!0;!d&&c.active&&c.active[b]&&(c.totalActive--,delete c.active[b]),(d||!c.totalActive)&&(j.removeClass(a,t),a.removeData(r))}}function K(a,c){if(u.disabled)return!0;if(i(a,v))return u.running;var d,e,f;do{if(0===c.length)break;var g=i(c,v),h=g?u:c.data(r)||{};if(h.disabled)return!0;if(g&&(f=!0),d!==!1){var j=c.data(s);b.isDefined(j)&&(d=j)}e=e||h.running||h.last&&!h.last.isClassBased}while(c=c.parent());return!f||!d&&e}j=A,v.data(r,u);var L=x.$watch(function(){return z.totalPendingRequests},function(a){0===a&&(L(),x.$$postDigest(function(){x.$$postDigest(function(){u.running=!1})}))}),M=0,N=e.classNameFilter(),O=N?function(a){return N.test(a)}:function(){return!0};return{animate:function(a,b,c,d,e){return d=d||"ng-inline-animate",e=D(e)||{},e.from=c?b:null,e.to=c?c:b,C(function(b){return H("animate",d,h(a),null,null,k,e,b)})},enter:function(c,d,e,f){return f=D(f),c=b.element(c),d=g(d),e=g(e),B(c,!0),a.enter(c,d,e),C(function(a){return H("enter","ng-enter",h(c),d,e,k,f,a)})},leave:function(c,d){return d=D(d),c=b.element(c),I(c),B(c,!0),C(function(b){return H("leave","ng-leave",h(c),null,null,function(){a.leave(c)},d,b)})},move:function(c,d,e,f){return f=D(f),c=b.element(c),d=g(d),e=g(e),I(c),B(c,!0),a.move(c,d,e),C(function(a){return H("move","ng-move",h(c),d,e,k,f,a)})},addClass:function(a,b,c){return this.setClass(a,b,[],c)},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},setClass:function(c,d,e,g){g=D(g);var i="$$animateClasses";if(c=b.element(c),c=h(c),B(c))return a.$$setClassImmediately(c,d,e,g);var j,k=c.data(i),m=!!k;return k||(k={},k.classes={}),j=k.classes,d=n(d)?d:d.split(" "),l(d,function(a){a&&a.length&&(j[a]=!0)}),e=n(e)?e:e.split(" "),l(e,function(a){a&&a.length&&(j[a]=!1)}),m?(g&&k.options&&(k.options=b.extend(k.options||{},g)),k.promise):(c.data(i,k={classes:j,options:g}),k.promise=C(function(b){var d=c.parent(),e=f(c),g=e.parentNode;if(!g||g.$$NG_REMOVED||e.$$NG_REMOVED)return void b();var h=c.data(i);c.removeData(i);var j=c.data(r)||{},k=E(c,h,j.active);return k?H("setClass",k,c,d,null,function(){k[0]&&a.$$addClassImmediately(c,k[0]),k[1]&&a.$$removeClassImmediately(c,k[1])},h.options,b):b()}))},cancel:function(a){a.$$cancelFn()},enabled:function(a,b){switch(arguments.length){case 2:if(a)J(b);else{var c=b.data(r)||{};c.disabled=!0,b.data(r,c)}break;case 1:u.disabled=!a;break;default:a=!u.disabled}return!!a}}}]),e.register("",["$window","$sniffer","$timeout","$$animateReflow",function(d,e,g,h){function i(){J||(J=h(function(){W=[],J=null,U={}}))}function m(a,b){J&&J(),W.push(b),J=h(function(){l(W,function(a){a()}),W=[],J=null,U={}})}function p(a,c){var d=f(a);a=b.element(d),Z.push(a);var e=Date.now()+c;Y>=e||(g.cancel(X),Y=e,X=g(function(){r(Z),Z=[]},c,!1))}function r(a){l(a,function(a){var b=a.data(Q);b&&l(b.closeAnimationFns,function(a){a()})})}function s(a,b){var c=b?U[b]:null;if(!c){var e=0,f=0,g=0,h=0;l(a,function(a){if(a.nodeType==q){var b=d.getComputedStyle(a)||{},c=b[E+K];e=Math.max(t(c),e);var i=b[E+M];f=Math.max(t(i),f);{b[G+M]}h=Math.max(t(b[G+M]),h);var j=t(b[G+K]);j>0&&(j*=parseInt(b[G+N],10)||1),g=Math.max(j,g)}}),c={total:0,transitionDelay:f,transitionDuration:e,animationDelay:h,animationDuration:g},b&&(U[b]=c)}return c}function t(a){var b=0,c=o(a)?a.split(/\s*,\s*/):[];return l(c,function(a){b=Math.max(parseFloat(a)||0,b)}),b}function u(a){var b=a.parent(),c=b.data(P);return c||(b.data(P,++V),c=V),c+"-"+f(a).getAttribute("class")}function v(a,b,c,d){var e=["ng-enter","ng-leave","ng-move"].indexOf(c)>=0,g=u(b),h=g+" "+c,i=U[h]?++U[h].total:0,k={};if(i>0){var l=c+"-stagger",m=g+" "+l,n=!U[m];n&&j.addClass(b,l),k=s(b,m),n&&j.removeClass(b,l)}j.addClass(b,c);var o=b.data(Q)||{},p=s(b,h),q=p.transitionDuration,r=p.animationDuration;if(e&&0===q&&0===r)return j.removeClass(b,c),!1;var t=d||e&&q>0,v=r>0&&k.animationDelay>0&&0===k.animationDuration,w=o.closeAnimationFns||[];b.data(Q,{stagger:k,cacheKey:h,running:o.running||0,itemIndex:i,blockTransition:t,closeAnimationFns:w});var z=f(b);return t&&(x(z,!0),d&&b.css(d)),v&&y(z,!0),!0}function w(a,b,c,d,e){function h(){b.off(M,i),j.removeClass(b,n),j.removeClass(b,o),K&&g.cancel(K),C(b,c);var a=f(b);for(var d in r)a.style.removeProperty(r[d])}function i(a){a.stopPropagation();var b=a.originalEvent||a,c=b.$manualTimeStamp||b.timeStamp||Date.now(),e=parseFloat(b.elapsedTime.toFixed(R));Math.max(c-L,0)>=G&&e>=D&&d()}var k=f(b),m=b.data(Q);if(-1==k.getAttribute("class").indexOf(c)||!m)return void d();var n="",o="";l(c.split(" "),function(a,b){var c=(b>0?" ":"")+a;n+=c+"-active",o+=c+"-pending"});var q="",r=[],t=m.itemIndex,u=m.stagger,v=0;if(t>0){var w=0;u.transitionDelay>0&&0===u.transitionDuration&&(w=u.transitionDelay*t);var z=0;u.animationDelay>0&&0===u.animationDuration&&(z=u.animationDelay*t,r.push(I+"animation-play-state")),v=Math.round(100*Math.max(w,z))/100}v||(j.addClass(b,n),m.blockTransition&&x(k,!1));var A=m.cacheKey+" "+n,B=s(b,A),D=Math.max(B.transitionDuration,B.animationDuration);if(0===D)return j.removeClass(b,n),C(b,c),void d();!v&&e&&Object.keys(e).length>0&&(B.transitionDuration||(b.css("transition",B.animationDuration+"s linear all"),r.push("transition")),b.css(e));var E=Math.max(B.transitionDelay,B.animationDelay),G=E*T;if(r.length>0){var J=k.getAttribute("style")||"";";"!==J.charAt(J.length-1)&&(J+=";"),k.setAttribute("style",J+" "+q)}var K,L=Date.now(),M=H+" "+F,N=(E+D)*S,O=(v+N)*T;return v>0&&(j.addClass(b,o),K=g(function(){K=null,B.transitionDuration>0&&x(k,!1),B.animationDuration>0&&y(k,!1),j.addClass(b,n),j.removeClass(b,o),e&&(0===B.transitionDuration&&b.css("transition",B.animationDuration+"s linear all"),b.css(e),r.push("transition"))},v*T,!1)),b.on(M,i),m.closeAnimationFns.push(function(){h(),d()}),m.running++,p(b,O),h}function x(a,b){a.style[E+L]=b?"none":""}function y(a,b){a.style[G+O]=b?"paused":""}function z(a,b,c,d){return v(a,b,c,d)?function(a){a&&C(b,c)}:void 0}function A(a,b,c,d,e){return b.data(Q)?w(a,b,c,d,e):(C(b,c),void d())}function B(a,b,c,d,e){var f=z(a,b,c,e.from);if(!f)return i(),void d();var g=f;return m(b,function(){g=A(a,b,c,d,e.to)}),function(a){(g||k)(a)}}function C(a,b){j.removeClass(a,b);var c=a.data(Q);c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData(Q))}function D(a,b){var c="";return a=n(a)?a:a.split(/\s+/),l(a,function(a,d){a&&a.length>0&&(c+=(d>0?" ":"")+a+b)}),c}var E,F,G,H,I="";a.ontransitionend===c&&a.onwebkittransitionend!==c?(I="-webkit-",E="WebkitTransition",F="webkitTransitionEnd transitionend"):(E="transition",F="transitionend"),a.onanimationend===c&&a.onwebkitanimationend!==c?(I="-webkit-",G="WebkitAnimation",H="webkitAnimationEnd animationend"):(G="animation",H="animationend");var J,K="Duration",L="Property",M="Delay",N="IterationCount",O="PlayState",P="$$ngAnimateKey",Q="$$ngAnimateCSS3Data",R=3,S=1.5,T=1e3,U={},V=0,W=[],X=null,Y=0,Z=[];return{animate:function(a,b,c,d,e,f){return f=f||{},f.from=c,f.to=d,B("animate",a,b,e,f)},enter:function(a,b,c){return c=c||{},B("enter",a,"ng-enter",b,c)},leave:function(a,b,c){return c=c||{},B("leave",a,"ng-leave",b,c)},move:function(a,b,c){return c=c||{},B("move",a,"ng-move",b,c)},beforeSetClass:function(a,b,c,d,e){e=e||{};var f=D(c,"-remove")+" "+D(b,"-add"),g=z("setClass",a,f,e.from);return g?(m(a,d),g):(i(),void d())},beforeAddClass:function(a,b,c,d){d=d||{};var e=z("addClass",a,D(b,"-add"),d.from);return e?(m(a,c),e):(i(),void c())},beforeRemoveClass:function(a,b,c,d){d=d||{};var e=z("removeClass",a,D(b,"-remove"),d.from);return e?(m(a,c),e):(i(),void c())},setClass:function(a,b,c,d,e){e=e||{},c=D(c,"-remove"),b=D(b,"-add");var f=c+" "+b;return A("setClass",a,f,d,e.to)},addClass:function(a,b,c,d){return d=d||{},A("addClass",a,D(b,"-add"),c,d.to)},removeClass:function(a,b,c,d){return d=d||{},A("removeClass",a,D(b,"-remove"),c,d.to)}}}])}])}(window,window.angular),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.angularStripe=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){(function(c){"use strict";b.exports=("undefined"!=typeof window?window.angular:"undefined"!=typeof c?c.angular:null).module("angular-stripe",[]).provider("stripe",a("./provider")).name}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./provider":2}],2:[function(a,b){(function(c){"use strict";var d="undefined"!=typeof window?window.Stripe:"undefined"!=typeof c?c.Stripe:null;b.exports=function(){this.setPublishableKey=d.setPublishableKey,this.$get=a("./service")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./service":3}],3:[function(a,b){(function(a){"use strict";var c="undefined"!=typeof window?window.angular:"undefined"!=typeof a?a.angular:null,d="undefined"!=typeof window?window.Stripe:"undefined"!=typeof a?a.Stripe:null;b.exports=function(a){function b(b,d){return function(e,f){if("function"==typeof f)throw new Error('"params" cannot be a function');return a(function(a,g){b[d](e,f,function(b,d){return d.error?g(c.extend(new Error,d.error)):a(d)})})}}function e(a,e){var f={setPublishableKey:d.setPublishableKey};return c.forEach(e,function(a,e){var g=f[e]={};e=d[e],c.forEach(a.promisify,function(a){g[a]=b(e,a)}),c.forEach(a.reference,function(a){g[a]=e[a]})}),f}return e(d,{card:{reference:["validateCardNumber","validateExpiry","validateCVC","cardType"],promisify:["createToken"]},bankAccount:{reference:["validateRoutingNumber","validateAccountNumber"],promisify:["createToken"]}})},b.exports.$inject=["$q"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}),function(a,b){"use strict";function c(a,c,e){d.directive(a,["$parse","$swipe",function(d,f){var g=75,h=.3,i=30;return function(j,k,l){function m(a){if(!n)return!1;var b=Math.abs(a.y-n.y),d=(a.x-n.x)*c;return o&&g>b&&d>0&&d>i&&h>b/d}var n,o,p=d(l[a]),q=["touch"];b.isDefined(l.ngSwipeDisableMouse)||q.push("mouse"),f.bind(k,{start:function(a){n=a,o=!0},cancel:function(){o=!1},end:function(a,b){m(a)&&j.$apply(function(){k.triggerHandler(e),p(j,{$event:b})})}},q)}}])}var d=b.module("ngTouch",[]);d.factory("$swipe",[function(){function a(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}}function c(a,c){var d=[];return b.forEach(a,function(a){var b=e[a][c];b&&d.push(b)}),d.join(" ")}var d=10,e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};return{bind:function(b,e,f){var g,h,i,j,k=!1;f=f||["mouse","touch"],b.on(c(f,"start"),function(b){i=a(b),k=!0,g=0,h=0,j=i,e.start&&e.start(i,b)});var l=c(f,"cancel");l&&b.on(l,function(a){k=!1,e.cancel&&e.cancel(a)}),b.on(c(f,"move"),function(b){if(k&&i){var c=a(b);if(g+=Math.abs(c.x-j.x),h+=Math.abs(c.y-j.y),j=c,!(d>g&&d>h))return h>g?(k=!1,void(e.cancel&&e.cancel(b))):(b.preventDefault(),void(e.move&&e.move(c,b)))}}),b.on(c(f,"end"),function(b){k&&(k=!1,e.end&&e.end(a(b),b))})}}}]),d.config(["$provide",function(a){a.decorator("ngClickDirective",["$delegate",function(a){return a.shift(),a}])}]),d.directive("ngClick",["$parse","$timeout","$rootElement",function(a,c,d){function e(a,b,c,d){return Math.abs(a-c)<p&&Math.abs(b-d)<p}function f(a,b,c){for(var d=0;d<a.length;d+=2)if(e(a[d],a[d+1],b,c))return a.splice(d,d+2),!0;return!1}function g(a){if(!(Date.now()-j>o)){var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].clientX,d=b[0].clientY;1>c&&1>d||l&&l[0]===c&&l[1]===d||(l&&(l=null),"label"===a.target.tagName.toLowerCase()&&(l=[c,d]),f(k,c,d)||(a.stopPropagation(),a.preventDefault(),a.target&&a.target.blur()))}}function h(a){var b=a.touches&&a.touches.length?a.touches:[a],d=b[0].clientX,e=b[0].clientY;k.push(d,e),c(function(){for(var a=0;a<k.length;a+=2)if(k[a]==d&&k[a+1]==e)return void k.splice(a,a+2)},o,!1)}function i(a,b){k||(d[0].addEventListener("click",g,!0),d[0].addEventListener("touchstart",h,!0),k=[]),j=Date.now(),f(k,a,b)}var j,k,l,m=750,n=12,o=2500,p=25,q="ng-click-active";return function(c,d,e){function f(){o=!1,d.removeClass(q)}var g,h,j,k,l=a(e.ngClick),o=!1;d.on("touchstart",function(a){o=!0,g=a.target?a.target:a.srcElement,3==g.nodeType&&(g=g.parentNode),d.addClass(q),h=Date.now();var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].originalEvent||b[0];j=c.clientX,k=c.clientY}),d.on("touchmove",function(){f()}),d.on("touchcancel",function(){f()}),d.on("touchend",function(a){var c=Date.now()-h,l=a.changedTouches&&a.changedTouches.length?a.changedTouches:a.touches&&a.touches.length?a.touches:[a],p=l[0].originalEvent||l[0],q=p.clientX,r=p.clientY,s=Math.sqrt(Math.pow(q-j,2)+Math.pow(r-k,2));o&&m>c&&n>s&&(i(q,r),g&&g.blur(),b.isDefined(e.disabled)&&e.disabled!==!1||d.triggerHandler("click",[a])),f()}),d.onclick=function(){},d.on("click",function(a,b){c.$apply(function(){l(c,{$event:b||a})})}),d.on("mousedown",function(){d.addClass(q)}),d.on("mousemove mouseup",function(){d.removeClass(q)})}}]),c("ngSwipeLeft",-1,"swipeleft"),c("ngSwipeRight",1,"swiperight")}(window,window.angular);var app=angular.module("gatku",["angularFileUpload","ngCookies","ipCookie","ngAnimate","angular-stripe","ngTouch"]);app.config(function(a){a.setPublishableKey("pk_test_ridkQh4sxzTmvXFqSMtpzCcm")}),app.filter("money",function(){return function(a){return a/100}}),app.directive("backImg",function(){return function(a,b,c){c.$observe("backImg",function(a){b.css({"background-image":"url("+a+")","background-size":"cover"})})}}),app.directive("hoverCard",["$compile","$window","Product","$filter",function(a,b,c,d){return{restrict:"E",scope:!0,link:function(e,f,g){e.product={};var h=(d("money"),angular.element(f[0])),i='<div class="hover-card"><h2>{{ product.name }}</h2><div class="hover-card-image-container" ng-class="{ \'pole\' : product.type.slug === \'pole\' }"><img ng-src="{{ product.thumb }}"></div><div class="hover-card-actions"><a ng-href="/product/'+g.slug+'" target="_blank"><div class="button success-bg">See This Product</div></a></div><div class="hover-card-price">${{ product.price | money }}</div><div class="clear"></div><div class="hover-card-carot shadowed"></div><div class="hover-card-carot"></div></div>',j=angular.element(b.document.getElementsByTagName("body")[0]),k=a(i)(e);e.productFetched=!1,e.init=function(){b.innerWidth>750&&(j.append(k),e.positionCard(),e.fetchProduct())},e.fetchProduct=function(){c.getBySlug(g.slug).success(function(a){e.product=a.data,e.productFetched=!0,e.positionCard()}).error(function(a){console.log(a.message)})},e.positionCard=function(){var a=e.getRootOffsetTop(h[0],0),b=e.getRootOffsetLeft(h[0],0),c=h[0].offsetWidth,d=k[0].offsetHeight,f=a-d/2,g=b+c;k.css({top:f+"px",left:g+"px"})},e.getRootOffsetTop=function(a,b){return null===a.offsetParent?b+a.offsetTop:e.getRootOffsetTop(a.offsetParent,b+a.offsetTop)},e.getRootOffsetLeft=function(a,b){return null===a.offsetParent?b+a.offsetLeft:e.getRootOffsetLeft(a.offsetParent,b+a.offsetLeft)},h.bind("mouseover",function(){e.productFetched||e.fetchProduct(),k.addClass("visible")}),h.bind("mouseleave",function(){k.removeClass("visible")}),k.bind("mouseover",function(){k.addClass("visible")}),k.bind("mouseleave",function(){k.removeClass("visible")}),angular.element(b).bind("resize",function(){e.positionCard()}),e.init()}}}]),app.directive("productBuyers",["Product",function(a){return{restrict:"E",scope:!1,template:'<div><p class="product-buyers-header bold" ng-show="photos.length">Others who have bought this product:</p><div class="product-buyers-container"><div class="product-buyer placeholder square" ng-hide="photos.length"></div><div class="product-buyer square" ng-repeat="photo in photos | limitTo:3" ng-style="{\'background-image\':\'url(\' + photo.image + \')\'}"></div><div class="clear"></div></div></div>',link:function(b,c,d){function e(){a.customerPhotos(d.productId).success(function(a){b.photos=a.data,Squares.init()}).error(function(){console.log("There was a problem getting the product images")})}b.photos=[],e()}}}]),app.directive("loaded",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.loaded);c.on("load",function(a){b.$apply(function(){e(b,{$event:a})})})}}}]),app.directive("alerter",["$window","$timeout","AlertService",function(a,b,c){return{restrict:"E",template:'<div class="alert-container slide-up" ng-show="show">'+"<div ng-class=\"{'success-alert' : alertType === 'success', 'info-alert' : alertType === 'info', 'error-alert' : alertType === 'error'}\">{{ message }}</div><i class=\"fa fa-close\" ng-click=\"show = false\"></i></div>",scope:!1,link:function(a){function d(){a.message=c.message,a.show=!0,b(function(){a.show=!1},4e3)}a.message="",a.show=!1,a.alertType="success",console.log("is this happening?"),a.$on("successAlert",function(){a.alertType="success",d()}),a.$on("infoAlert",function(){a.alertType="info",d()}),a.$on("errorAlert",function(){a.alertType="error",d()})}}}]),app.directive("hamburger",["NavigationService",function(a){return{restrict:"E",template:'<div class="hamburger" ng-click="action()" ng-class="{ \'open\' : open }"><div class="patty"></div><div class="patty"></div><div class="patty"></div><span class="status">{{ status }}</span></div>',link:function(b){b.open=!1,b.status="Menu",b.action=function(){b.open?a.close():a.open()},b.$on("open",function(){b.open=!0,b.status="Back"}),b.$on("close",function(){b.open=!1,b.status="Menu"})}}}]),app.directive("cartIcon",["CartService",function(a){return{restrict:"E",template:'<div class="cart-icon" ng-click="showCart()"><span class="mobile-cart-indicator" ng-class="{ \'attention\' : count > 0 }">{{ count }}</span><i class="fa fa-shopping-cart"></i></div>',link:function(b){b.count=a.getItems().length,b.$on("update",function(){b.count=a.getItems().length}),b.showCart=function(){a.show()}}}}]),app.directive("bodyFreeze",["CartService",function(){return{restrict:"A",link:function(a,b){a.$on("show",function(){b.addClass("frozen")}),a.$on("hide",function(){b.removeClass("frozen")})}}}]),app.factory("AlertService",["$rootScope",function(a){var b={};return b.message="",b.broadcast=function(a,b){this.message=a,"success"==b?this.broadcastSuccessAlert():"error"==b?this.broadcastErrorAlert():("info"==b,this.broadcastInfoAlert())},b.broadcastSuccessAlert=function(){a.$broadcast("successAlert")},b.broadcastErrorAlert=function(){a.$broadcast("errorAlert")},b.broadcastInfoAlert=function(){a.$broadcast("infoAlert")},b}]),app.factory("CartService",["$rootScope","$http","$cookies","$cookieStore","ipCookie","AlertService",function(a,b,c,d,e){var f={},g=e;return f.getItems=function(){var a=g("items")||[];return a},f.addItem=function(b){var c=f.getItems(),d={};d.id=b.id,d.name=b.name,d.shortName=b.shortName,d.length=b.length,d.price=b.price,d.thumb=b.thumb,d.slug=b.slug,d.type={},d.type.shippingPrice=b.type.shippingPrice,d.type.slug=b.type.slug,d.sizeable=b.sizeable,d.sizeId=b.sizeId,d.addons=[],d.quantity=1;for(var e=0;e<b.addons.length;e++){var h=b.addons[e],i={};
h.checked&&(i.id=h.product.id,i.price=h.product.price,i.name=h.product.name,i.sizeable=h.product.sizeable,h.product.sizeId&&(i.sizeId=h.product.sizeId),i.quantity=1,d.addons.push(i))}c.push(d),g("items",c,{path:"/"}),a.$broadcast("update"),a.$broadcast("itemAdded")},f.removeItem=function(b){var c=f.getItems();return c.length?(c.splice(b,1),g("items",c,{path:"/"}),void a.$broadcast("update")):!1},f.increaseItemQuantity=function(b){var c=g("items")||[];c[b].quantity++,g("items",c,{path:"/"}),a.$broadcast("update")},f.decreaseItemQuantity=function(b){var c=g("items")||[];c[b].quantity--,0==c[b].quantity&&c.splice(b,1),g("items",c,{path:"/"}),a.$broadcast("update")},f.increaseAddonQuantity=function(b,c){var d=g("items")||[];d[b].addons[c].quantity++,g("items",d,{path:"/"}),a.$broadcast("update")},f.decreaseAddonQuantity=function(b,c){var d=g("items")||[];d[b].addons[c].quantity--,0==d[b].addons[c].quantity&&d[b].addons.splice(c,1),g("items",d,{path:"/"}),a.$broadcast("update")},f.update=function(){a.$broadcast("update")},f.empty=function(){g.remove("items",{path:"/"}),a.$broadcast("update")},f.show=function(){a.$broadcast("show")},f.hide=function(){a.$broadcast("hide")},f.productInCart=function(a){var b=g("items")||[];if(b.length)for(var c=0;c<b.length;c++)if(b[c].id===a)return!0;return!1},f}]),app.factory("NavigationService",["$rootScope",function(a){var b={};return b.open=function(){a.$broadcast("open")},b.close=function(){a.$broadcast("close")},b}]),app.factory("StripeService",["stripe",function(a){var b={};return b.validate=function(b){return a.card.validateCardNumber(b.number)?a.card.validateExpiry(b.exp_month,b.exp_year)?a.card.validateCVC(b.cvc)?{response:!0,message:"Valid card"}:{response:!1,message:"Invalic CVC code"}:{response:!1,message:"Invalid expiration date"}:{response:!1,message:"Invalid card number"}},b.createToken=function(b){return a.card.createToken(b)},b.displayErrors=function(a){"incorrect_number"===a.code||"invalid_number"===a.code||"invalid_expiry_month"===a.code||"invalid-expiry-year"===a.code||"invalid_cvc"===a.code||"card_declined"===a.code},b}]),app.factory("Image",["$http","$upload",function(a,b){return{upload:function(a){return b.upload(a)}}}]),app.factory("Product",["$http",function(a){return{all:function(){return a.get("/product")},get:function(b){return a.get("/product/get/"+b)},getBySlug:function(b){return a.get("/product/by/slug/"+b)},store:function(b){return a.post("/product",b)},update:function(b,c){return a.put("/product/"+b,c)},getTypes:function(){return a.get("/product/types")},getByType:function(){return a.get("/product/by/type")},customerPhotos:function(b){return a.get("/product/photos/"+b)}}}]),app.factory("Order",["$http",function(a){return{all:function(){return a.get("/order")},store:function(b){return a.post("/order",b)}}}]),app.factory("YouImage",["$http",function(a){return{all:function(){return a.get("/you-image")},save:function(b){return a.post("/you-image",b)}}}]),app.factory("Size",["$http",function(a){return{getBySlug:function(b){return a.get("/size/by/slug/"+b)}}}]),app.controller("AdminController",["$scope","Image","Product","Order","YouImage",function(a,b,c,d,e){function f(){c.all().success(function(b){a.products=b.data}).error(function(){console.log("Sorry, there was an error retrieving the products")})}function g(){c.getTypes().success(function(b){a.types=b.data}).error(function(){console.log("Sorry, types could not be retrieved")})}function h(){a.newProduct.addonSelection=[];for(var b=0;b<a.products.length;b++){var c={};if(c.id=a.products[b].id,c.name=a.products[b].name,a.editingNew)c.isAddon=!1;else if(a.newProduct.addons.length)for(var d=0;d<a.newProduct.addons.length;d++){if(a.newProduct.addons[d].childId==a.products[b].id){c.isAddon=!0;break}c.isAddon=!1}else c.isAddon=!1;a.newProduct.addonSelection.push(c)}}function i(){d.all().success(function(b){a.orders=b.data}).error(function(a){console.log(a.message)})}function j(){e.all().success(function(b){a.youImages=b.data,Squares.init()}).error(function(){console.log("There was an error getting the You images")})}a.init=function(){a.show("orders"),i(),f(),g(),j()},a.orders=[],a.types=[],a.products=[],a.newProduct={},a.youImages=[],a.newYouImage={},a.editState=!1,a.editingNew=!0,a.show=function(b){switch(a.showOrders=!1,a.showProducts=!1,a.showYou=!1,a.showVideos=!1,a.reset(),b){case"orders":a.showOrders=!0;break;case"products":a.showProducts=!0;break;case"you":a.showYou=!0;break;case"videos":a.showVideos=!0}},a.saveProduct=function(){var b=new Nanobar({bg:"#fff"});b.go(60),c.store(a.newProduct).success(function(){f(),a.reset(),b.go(100)}).error(function(){b.go(100),console.log("Sorry, something went wrong")})},a.createProduct=function(){a.newProduct={},a.editState=!0,a.editingNew=!0,h()},a.editProduct=function(b){a.newProduct=b,a.editState=!0,a.editingNew=!1,h()},a.updateProduct=function(){var b=new Nanobar({bg:"#fff"}),d=a.newProduct;b.go(65),c.update(d.id,d).success(function(){f(),a.reset(),b.go(100)}).error(function(){b.go(100),console.log("Sorry, something went wrong")})},a.upload=function(c,d){var e=new Nanobar({bg:"#fff"}),f=c[0];if(!f)return!1;var g={url:"/product/image",file:f};e.go(40),b.upload(g).progress(function(a){parseInt(100*a.loaded/a.total)}).success(function(b){a.newProduct[d]=b.data,e.go(100)}).error(function(){e.go(100)})},a.reset=function(){a.newProduct={},a.newYouImage={},a.editState=!1,a.editingNew=!0},a.youImages=[],a.newYouImage={},a.uploadYouImage=function(c){var d=c[0];if(!d)return!1;var e={url:"/you-image/upload",file:d};a.editState=!0,b.upload(e).success(function(b){a.newYouImage.image=b.data}).error(function(a){console.log(a.message)})},a.saveYouImage=function(){var b=new Nanobar({bg:"#fff"});b.go(40),e.save(a.newYouImage).success(function(){j(),a.reset(),b.go(100)}).error(function(a){console.log(a.message)})},a.clearNewYouImage=function(){a.newYouImage=!1},a.init()}]),app.controller("CartBlinderController",["$scope","CartService",function(a,b){a.show=!1,a.hide=function(){b.hide()},a.$on("show",function(){a.show=!0}),a.$on("hide",function(){a.show=!1})}]),app.controller("CartController",["$scope","CartService","StripeService","Order","AlertService",function(a,b,c,d,e){function f(){var b={};return b.number=a.card.number,b.exp_month=a.card.expiryMonth,b.exp_year=a.card.expiryYear,b.cvc=a.card.securityCode,b.name=a.form.firstName+" "+a.form.lastName,b}a.items=[],a.show=!1,a.form={},a.form.useBillingForShipping=!0,a.status="",a.stages=["cart","checkout","payment","confirmation"],a.currentStage=a.stages[0],a.toStage=function(b){return a.validate(b)===!1?!1:void(a.currentStage=a.stages[b])},a.getItems=function(){var c=b.getItems();a.items=c},a.removeItem=function(a){b.removeItem(a)},a.increaseItemQuantity=function(a){b.increaseItemQuantity(a)},a.decreaseItemQuantity=function(a){b.decreaseItemQuantity(a)},a.increaseAddonQuantity=function(a,c){b.increaseAddonQuantity(a,c)},a.decreaseAddonQuantity=function(a,c){b.decreaseAddonQuantity(a,c)},a.shipping=function(){for(var b=0,c=[],d=[],e=[],f=0;f<a.items.length;f++){var g=a.items[f];"pole"===g.type.slug?c.push(g):"head"===g.type.slug?d.push(g):e.push(g)}if(c.length>0){var h=c[0].type.shippingPrice;b=c.length>1?h*c.length:h}else if(d.length>0){var i=d[0].type.shippingPrice;b=d.length>1?i*Math.ceil(d.length/2):i}else e.length>0&&(b=e[0].type.shippingPrice);return b},a.total=function(){var b=0,c=0;return angular.forEach(a.items,function(c,d){b+=a.items[d].price*a.items[d].quantity;for(var e=0;e<a.items[d].addons.length;e++)b+=a.items[d].addons[e].price*a.items[d].addons[e].quantity}),c=a.shipping(),b+c},a.submit=function(){var b=f();e.broadcast("Processing...","info"),c.createToken(b).then(function(b){var c={items:a.items,form:a.form,token:b};d.store(c).success(function(){e.broadcast("Success! Redirecting...","success"),a.show=!1,a.emptyCart(),window.location.replace("/thankyou")}).error(function(){e.broadcast("Sorry, there was an error creating your order. Please try again later","error")})})},a.hide=function(){b.hide()},a.emptyCart=function(){b.empty(),a.getItems()},a.validate=function(b){if(a.status="",1==b)return!0;if(2==b)return a.form.firstName?a.form.lastName?a.form.email?a.form.phone?a.form.address?a.form.city?a.form.state?a.form.country?!0:(a.status="Please enter a country",e.broadcast("Please enter a country","error"),!1):(a.status="Please enter a state",e.broadcast("Please enter a state","error"),!1):(a.status="Please enter a city",e.broadcast("Please enter a city","error"),!1):(a.status="Please enter a street address.",e.broadcast("Please enter a street address","error"),!1):(a.status="Please enter phone number.",e.broadcast("Please enter a phone number","error"),!1):(a.status="Please enter an email address.",e.broadcast("Please enter an email address","error"),!1):(a.status="Please enter a last name.",e.broadcast("Please enter a last name","error"),!1):(a.status="Please enter a first name.",e.broadcast("Please enter a first name","error"),!1);if(3==b){var d=f(),g=c.validate(d);if(g.response===!1)return a.status=g.message,e.broadcast(g.messsage,"error"),!1;if(g.response)return a.status="",!0}},a.$on("update",function(){a.getItems()}),a.$on("show",function(){a.show=!0}),a.$on("hide",function(){a.show=!1}),a.getItems()}]),app.controller("CartCountController",["$scope","CartService",function(a,b){function c(){for(var c=b.getItems(),d=0,e=0;e<c.length;e++){d+=1*c[e].quantity;for(var f=0;f<c[e].addons.length;f++)d+=1*c[e].addons[f].quantity}a.count=d}a.$on("update",function(){c()}),a.showCart=function(){b.show()},c()}]),app.controller("MediaController",function(a){a.productPage=!0,a.brandPage=!1,a.toProductPage=function(){a.productPage=!0,a.brandPage=!1,setTimeout(function(){Grid.init()},200)},a.toBrandPage=function(){a.productPage=!1,a.brandPage=!0}}),app.controller("MobileNavigationController",["$scope","Product",function(a){a.open=!1,a.$on("open",function(){a.open=!0}),a.$on("close",function(){a.open=!1})}]),app.controller("ProductController",["$scope","Product","CartService","Size","AlertService","$timeout",function(a,b,c,d,e,f){function g(){for(var b=0;b<a.product.sizes.length;b++)if(a.product.sizes[b].checked)return a.product.sizes[b];return!1}function h(){for(var b=0;b<a.product.addons.length;b++){var c=a.product.addons[b];if(c.product.sizeable&&"bands"===c.product.slug){var e=a.product.slug+"-band";d.getBySlug(e).success(function(a){c.product.price=a.data.price,c.product.sizeId=a.data.id}).error(function(){a.product.addons.splice(b,1)})}}}function i(){if(a.product.sizeable)for(var b=0;b<a.product.sizes.length;b++)a.product.sizes[b].checked=!1;else for(var b=0;b<a.product.addons.length;b++)a.product.addons[b].checked=!1}function j(){a.productAdded=!0,f(function(){a.productAdded=!1},3e3)}a.fullSize=!0,a.loaded=!1,a.productAdded=!1,a.product={},a.attached="pole"===layoutType||"extra"===layoutType?!0:!1,a.init=function(){a.getProduct()},a.getProduct=function(){b.get(productId).success(function(b){a.product=b.data,h(),a.loaded=!0}).error(function(){e.broadcast("Sorry, there is an error. Your page may have not rendered correctly.","error")})},a.addToCart=function(){if(a.product.sizeable){var b=g();if(!b)return!1;a.sizedProduct=angular.copy(a.product),a.sizedProduct.name=b.name,a.sizedProduct.price=b.price,a.sizedProduct.shortName=b.shortName,a.sizedProduct.sizeId=b.id,c.addItem(a.sizedProduct)}else c.addItem(a.product);i()},a.poleScrollInit=function(){PoleScroll.init()},a.goFullSize=function(){setTimeout(function(){PoleScroll.init()},20)},a.productAddedText=function(){return a.productAdded?"Item Added":"Add To Cart"},a.$on("itemAdded",function(){j()}),a.init()}]),app.controller("QuoteFormController",["$scope","Product","$http","AlertService",function(a,b,c,d){function e(){b.getByType().success(function(b){a.poles=b.data.poles}).error(function(){a.hidePoleChooser=!0})}a.form={},a.poles=[],a.submitAttempted=!1,a.success=!1,e(),a.submit=function(b){a.submitAttempted=!0;var e=new Nanobar({bg:"#fff"});b?(e.go(60),c.post("/quote",a.form).success(function(){a.success=!0,d.broadcast("Success! We will get back to you as quick as we can!","success"),e.go(100)}).error(function(){d.broadcast("Sorry, something went wrong. We will fix it as soon as possible","error"),e.go(100)})):d.broadcast("Please Fill in required fields","error")}}]),app.controller("StoreController",["$scope","Product",function(a,b){a.heads=[],a.poles=[],a.shrinker=[],a.extras=[],a.apparel=[],a.init=function(){a.getStore()},a.getStore=function(){b.getByType().success(function(b){a.heads=b.data.heads,a.poles=b.data.poles,a.shrinker=b.data.shrinker,a.extras=b.data.extras,a.apparel=b.data.apparel}).error(function(){console.log("Something went wrong getting the store data")})},a.init()}]),app.controller("VideoController",["$scope","$sce",function(a,b){a.videos=[{link:"//www.youtube.com/embed/qRm0BheSR_Q",title:"Spearfishing with GATKU Polespears",shortTitle:"At the Bahamas",description:"Video blog by Ted from Ted's Holdover about a hunting trip to the Bahama's using a GATKU Polespear."},{link:"//www.youtube.com/embed/aspLQ0hPoo0",title:"Break Away Setup",shortTitle:"Break Away Setup",description:"How to rig your own SLIP-TIP with break away system -"},{link:"//www.youtube.com/embed/xxbnO8oa72k",title:"Carp Killers",shortTitle:"Carp Killers",description:"Michael Dong and Dustin McIntyre tour Lake Mead to exterminate the invasive carp. The local ecosystem thanks them. All fish were killed with GAT-KU hybrid polespears."},{link:"//www.youtube.com/embed/CvRSkoTYq3s",title:"GATKU Gen-2 Polespears go to Baja",shortTitle:"GATKU Gone Baja",description:"Ryan Gattoni takes GATKU hybrid polespears south of the border in this short video."},{link:"//www.youtube.com/embed/8-eQhtrsdu8",title:"Nautilus Review",shortTitle:"Nautilus Review",description:"Video review of the GATKU Gen 2 Hybrid Polespear by Nautilus Spearfishing."},{link:"//www.youtube.com/embed/F3FEIE7rFsw",title:"Spearfishing in the Exumas",shortTitle:"In the Exumas",description:"Hunting Tiger Groupers and a close encounter with a shark. Video by Eric Poeltl. GATKU Polespear + Slip-Tip head used."}],a.activeVideo={},a.init=function(){a.setActiveVideo(0),ResponsiveVideo.init()},a.setActiveVideo=function(c){var d=String(a.videos[c].link);a.activeVideo=a.videos[c],a.activeVideo.link=b.trustAsResourceUrl(d)},a.init()}]);